"use strict";var login=getCookie("login");login?($(".login").html(login),$(".login").attr("href","")):$(".login").html("登录");var lists=JSON.parse(localStorage.getItem("cartList")),sum=0,tbody=document.querySelector(".shopS");lists.forEach(function(e){e.total=e.number*e.price;var t='\n            <tr class="shopList" data-id="'.concat(e.id,'">\n                <td class="imgTd"><img class="shops" src="').concat(e.scr,'" alt="" srcset=""></td>\n                <td class="titleTd">\n                    <h6>').concat(e.title,"</h6>\n                    <span>重量：").concat(e.weight,"</span>\n                    <span>店铺：").concat(e.shop,'</span>\n                </td>\n                <td class="Son2">\n                    <span class="reduce">-</span>\n                    <input type="text" value="').concat(e.number,'" class="count" disabled>\n                    <span class="add">+</span>\n                </td>\n                <td class="Son3">\n                    <span class="Price">').concat(e.price,' 元</span>\n                </td>\n                <td class="Son4">\n                    <span class="priceAll">').concat(e.total.toFixed(2),' 元</span>\n                </td>\n                <td class="Son5">\n                    <img class="del" src="../images/del.png" alt=""  style="cursor: pointer;">\n                </td>\n            </tr>\n            ');tbody.innerHTML+=t,sum+=e.total});var div1=document.createElement("div");div1.className="total";var str1='总价为<span style="color:red;font-weight:bolder;font-size:50px"> '.concat(sum.toFixed(2),"</span> 元");div1.innerHTML=str1;var main=document.querySelector("main");main.appendChild(div1);var nullgood=document.querySelector(".nullgoods");function rePriceAll(){var e=document.querySelector(".total span"),t=document.querySelectorAll(".shopS tr"),n=0;t.forEach(function(e){e.children[4]&&e.children[4].firstElementChild&&(n+=1*e.children[4].firstElementChild.innerHTML.slice(0,-3))}),e.innerHTML=n.toFixed(2)}tbody.onclick=function(e){var t=e.target,n=document.querySelectorAll(".shopS tr");if("+"==t.innerHTML){for(var l=0;l<lists.length;l++)lists[l].id==t.parentNode.parentNode.getAttribute("data-id")&&lists[l].number++;localStorage.setItem("cartList",JSON.stringify(lists));var i=t.parentNode.nextElementSibling.nextElementSibling.firstElementChild;t.previousElementSibling.value++,i.innerHTML=(t.previousElementSibling.value*t.parentNode.nextElementSibling.lastElementChild.innerHTML.slice(0,-3)).toFixed(2)+"元",rePriceAll()}if("-"==t.innerHTML&&1<t.nextElementSibling.value){i=t.parentNode.nextElementSibling.nextElementSibling.firstElementChild;t.nextElementSibling.value--,i.innerHTML=(t.nextElementSibling.value*t.parentNode.nextElementSibling.lastElementChild.innerHTML.slice(0,-3)).toFixed(2)+"元",rePriceAll()}if("del"==t.className&&confirm("是否删除")){t.parentNode.parentNode.remove();for(var s=[],a=0;a<lists.length;a++)lists[a].id==t.parentNode.parentNode.getAttribute("data-id")?console.log(lists[a]):s.push(lists[a]);localStorage.setItem("cartList",JSON.stringify(s)),rePriceAll(),n.length-3==0&&(nullgood.style.display="flex")}};